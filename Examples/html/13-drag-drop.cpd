"============================================
"ğŸ–±ï¸ DRAG AND DROP (ARRASTRAR Y SOLTAR)
"============================================
"Aprende a crear interfaces con arrastrar y soltar usando HTML5.

"EVENTOS PRINCIPALES
"----------------------------------------
'dragstart - Cuando empiezas a arrastrar
'drag - Mientras arrastras
'dragend - Cuando sueltas
'dragover - Cuando pasas por encima de zona de drop
'drop - Cuando sueltas en zona vÃ¡lida

"ATRIBUTO DRAGGABLE
"----------------------------------------
'Agregar draggable="true" a elementos HTML
'Por defecto, imÃ¡genes y links son draggables

"DATATRANSFER
"----------------------------------------
'e.dataTransfer.setData() - Guardar info
'e.dataTransfer.getData() - Leer info
'Permite pasar datos entre arrastrar y soltar

@{html}
<!DOCTYPE html>
<html lang="es">

<!-- #region HEAD -->
<head>
  <meta charset="UTF-8">
  <title>13 - Drag and Drop</title>

  <!-- #region ESTILOS -->
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f0f0f0;
    }

    h1 {
      text-align: center;
      color: #333;
    }

    .seccion {
      background: white;
      padding: 30px;
      margin: 20px auto;
      max-width: 800px;
      border-radius: 8px;
    }

    .drag-container {
      display: flex;
      justify-content: space-around;
      margin: 20px 0;
      gap: 20px;
    }

    .drag-source {
      flex: 1;
      background: #e3f2fd;
      padding: 20px;
      border-radius: 8px;
    }

    .drag-target {
      flex: 1;
      background: #c8e6c9;
      padding: 20px;
      border-radius: 8px;
      min-height: 200px;
      border: 2px dashed #4caf50;
    }

    .drag-target.over {
      background: #a5d6a7;
      border-color: #2e7d32;
    }

    .draggable {
      background: #2196f3;
      color: white;
      padding: 15px;
      margin: 10px 0;
      border-radius: 4px;
      cursor: move;
      user-select: none;
    }

    .draggable:hover {
      background: #1976d2;
      transform: scale(1.02);
    }

    .draggable.dragging {
      opacity: 0.5;
    }

    h3 {
      margin-top: 0;
      color: #666;
    }
  </style>
  <!-- #endregion -->
</head>
<!-- #endregion -->

<!-- #region BODY -->
<body>
  <h1>ğŸ–±ï¸ Drag and Drop (Arrastrar y Soltar)</h1>

  <!-- #region DEMO SIMPLE -->
  <div class="seccion">
    <h2>ğŸ“¦ Demo: Arrastra las cajas</h2>
    <p>Arrastra los elementos de la izquierda a la derecha</p>

    <div class="drag-container">
      <div class="drag-source">
        <h3>ğŸ“¤ Origen</h3>
        <div class="draggable" draggable="true" id="item1">
          ğŸ“¦ Item 1 - ArrÃ¡stramer
        </div>
        <div class="draggable" draggable="true" id="item2">
          ğŸ Item 2 - ArrÃ¡stramer
        </div>
        <div class="draggable" draggable="true" id="item3">
          ğŸ“® Item 3 - ArrÃ¡stramer
        </div>
      </div>

      <div class="drag-target" id="dropZone">
        <h3>ğŸ“¥ Destino (Suelta aquÃ­)</h3>
        <p style="color: #666;">Arrastra elementos aquÃ­</p>
      </div>
    </div>
  </div>
  <!-- #endregion -->

  <!-- #region SCRIPTS -->
  <script>
    // #region ELEMENTOS DRAGGABLES
    const draggables = document.querySelectorAll('.draggable');
    const dropZone = document.getElementById('dropZone');

    draggables.forEach(draggable => {
      // Cuando empieza a arrastrar
      draggable.addEventListener('dragstart', (e) => {
        draggable.classList.add('dragging');
        e.dataTransfer.effectAllowed = 'move';
        e.dataTransfer.setData('text/html', draggable.innerHTML);
      });

      // Cuando termina de arrastrar
      draggable.addEventListener('dragend', () => {
        draggable.classList.remove('dragging');
      });
    });
    // #endregion

    // #region ZONA DE DROP
    // Prevenir comportamiento por defecto (necesario para drop)
    dropZone.addEventListener('dragover', (e) => {
      e.preventDefault();
      dropZone.classList.add('over');
    });

    // Cuando sale de la zona
    dropZone.addEventListener('dragleave', () => {
      dropZone.classList.remove('over');
    });

    // Cuando suelta
    dropZone.addEventListener('drop', (e) => {
      e.preventDefault();
      dropZone.classList.remove('over');

      // Obtener el elemento arrastrado
      const dragging = document.querySelector('.dragging');

      if (dragging) {
        // Mover el elemento al dropZone
        dropZone.appendChild(dragging);
      }
    });
    // #endregion

    console.log('âœ… Drag and Drop inicializado');
    console.log('ğŸ–±ï¸ Arrastra los elementos de origen a destino');
  </script>
  <!-- #endregion -->

  <!-- #region CÃ“DIGO DE EJEMPLO -->
  <div class="seccion">
    <h3>ğŸ’» CÃ³digo BÃ¡sico:</h3>
    <pre style="background: #f5f5f5; padding: 15px; border-radius: 4px;">
// HTML
&lt;div draggable="true"&gt;ArrÃ¡stramer&lt;/div&gt;

// JavaScript
element.addEventListener('dragstart', (e) => {
  e.dataTransfer.setData('text', 'datos');
});

dropZone.addEventListener('drop', (e) => {
  e.preventDefault();
  const data = e.dataTransfer.getData('text');
});
    </pre>
  </div>
  <!-- #endregion -->

</body>
<!-- #endregion -->

</html>
@{end html}
